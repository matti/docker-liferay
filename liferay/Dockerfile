FROM mattipaksula/ubuntu-openjdk-liferay:18.04_11.0.2_7.1.2-ga3-20190107144105508

USER root
RUN apt-get update && apt-get install -y postgresql-client redis-tools
USER liferay

ENV LIFERAY_SETUP_PERIOD_WIZARD_PERIOD_ENABLED=false
ENV LIFERAY_SETUP_PERIOD_WIZARD_PERIOD_ADD_PERIOD_SAMPLE_PERIOD_DATA=false

ENV LIFERAY_LIFERAY_PERIOD_HOME=/app
ENV LIFERAY_ADMIN_PERIOD_EMAIL_PERIOD_FROM_PERIOD_ADDRESS=liferay.com
ENV LIFERAY_ADMIN_PERIOD_EMAIL_PERIOD_FROM_PERIOD_NAME="Test Test"
ENV LIFERAY_COMPANY_PERIOD_DEFAULT_PERIOD_LOCALE=en_US

ENV LIFERAY_DEFAULT_PERIOD_ADMIN_PERIOD_EMAIL_PERIOD_ADDRESS_PERIOD_PREFIX=test

ENV LIFERAY_CLUSTER_PERIOD_LINK_PERIOD_ENABLED=true
ENV LIFERAY_CLUSTER_PERIOD_LINK_PERIOD_CHANNEL_PERIOD_PROPERTIES_PERIOD_CONTROL=/app/jgroups_jdbc_ping.xml
ENV LIFERAY_CLUSTER_PERIOD_LINK_PERIOD_CHANNEL_PERIOD_PROPERTIES_PERIOD_TRANSPORT_PERIOD__NUMBER0_=/app/jgroups_jdbc_ping.xml

ENV LIFERAY_WEB_PERIOD_SERVER_PERIOD_PROTOCOL=https
ENV LIFERAY_REDIRECT_PERIOD_URL_PERIOD_SECURITY_PERIOD_MODE=domain
ENV LIFERAY_REDIRECT_PERIOD_URL_PERIOD_DOMAINS_PERIOD_ALLOWED=


COPY --chown=liferay:liferay layers/app /app
ENTRYPOINT [ "/app/entrypoint.sh" ]
